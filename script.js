// à¦®à¦œà¦¾à¦¦à¦¾à¦°, à¦¨à¦¿à¦°à§€à¦¹ à¦‰à¦¤à§à¦¤à¦°à§‡à¦° à¦¤à¦¾à¦²à¦¿à¦•à¦¾
const funnyResponses = [
    "à¦¤à§à¦®à¦¿? à¦¤à§à¦®à¦¿ à¦¹à¦²à§‡ à¦­à¦¾à¦‡ 'à¦˜à§à¦®à§‡à¦° à¦…à¦²à¦¿à¦®à§à¦ªà¦¿à¦•à§‡ à¦—à§‹à¦²à§à¦¡ à¦®à§‡à¦¡à§‡à¦²à¦¿à¦¸à§à¦Ÿ' à¦†à¦° 'à¦ªà¦¿à¦œà§à¦œà¦¾ à¦–à¦¾à¦“à¦¯à¦¼à¦¾à¦° à¦¬à¦¿à¦¶à§à¦¬ à¦šà§à¦¯à¦¾à¦®à§à¦ªà¦¿à¦¯à¦¼à¦¨'! à¦…à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦®à¦¾à¦¨à§à¦· à¦¤à§à¦®à¦¿! ðŸ˜‚",
    "à¦¹à¦¾à¦¹à¦¾! à¦¤à§à¦®à¦¿ à¦à¦•à¦Ÿà¦¾ 'à¦à¦¨à¦¾à¦°à§à¦œà¦¿à¦° à¦¬à§‹à¦®à¦¾', à¦•à¦¿à¦¨à§à¦¤à§ à¦®à¦¾à¦à§‡ à¦®à¦¾à¦à§‡ 'à¦†à¦²à¦¸à§‡à¦®à¦¿à¦° à¦°à¦¾à¦œà¦¾/à¦°à¦¾à¦¨à§€'à¥¤ à¦¬à§à¦¯à¦¾à¦²à§‡à¦¨à§à¦¸à¦¡ à¦ªà¦¾à¦°à§à¦¸à§‹à¦¨à¦¾à¦²à¦¿à¦Ÿà¦¿! ðŸ¤©",
    "à¦¤à§à¦®à¦¿? à¦¤à§à¦®à¦¿ à¦¹à¦²à§‡ 'à¦•à¦®à§‡à¦¡à¦¿ à¦¸à¦¿à¦¨à§‡à¦®à¦¾à¦° à¦ªà§à¦°à¦§à¦¾à¦¨ à¦šà¦°à¦¿à¦¤à§à¦°'à¥¤ à¦¤à§‹à¦®à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡ à¦¯à¦¾ à¦˜à¦Ÿà§‡, à¦¤à¦¾à¦¤à§‡à¦‡ à¦¹à¦¾à¦¸à¦¿! à¦¤à¦¬à§‡ à¦®à¦¨à¦Ÿà¦¾ à¦–à¦¾à¦à¦Ÿà¦¿ à¦¸à§‹à¦¨à¦¾à¥¤ âœ¨",
    "à¦¤à§‹à¦®à¦¾à¦° à¦®à¦§à§à¦¯à§‡ à¦†à¦›à§‡ 'à¦…à§à¦¯à¦¾à¦¡à¦­à§‡à¦žà§à¦šà¦¾à¦°à§‡à¦° à¦­à§‚à¦¤' à¦†à¦° 'à¦¡à¦¾à¦¯à¦¼à¦ªà¦¾à¦° à¦ªà¦°à¦¾ à¦¶à¦¿à¦¶à§à¦° à¦¸à¦°à¦²à¦¤à¦¾'à¥¤ à¦à¦•à¦Ÿà¦¾ à¦•à¦®à¦ªà§à¦²à¦¿à¦Ÿ à¦ªà§à¦¯à¦¾à¦•à§‡à¦œ! ðŸ˜‡",
    "à¦¤à§à¦®à¦¿ à¦à¦®à¦¨ à¦à¦•à¦œà¦¨, à¦¯à§‡ 'à¦•à¦¥à¦¾ à¦¬à¦²à¦¾à¦° à¦†à¦—à§‡ à¦¦à§'à¦¬à¦¾à¦° à¦­à¦¾à¦¬à§‡', à¦•à¦¿à¦¨à§à¦¤à§ 'à¦–à¦¾à¦“à¦¯à¦¼à¦¾à¦° à¦†à¦—à§‡ à¦ªà¦¾à¦à¦šà¦¬à¦¾à¦°à¦“ à¦­à¦¾à¦¬à§‡ à¦¨à¦¾'! à¦à¦Ÿà¦¾à¦‡ à¦¤à§‹à¦®à¦¾à¦° à¦†à¦¸à¦² à¦°à§‚à¦ª! ðŸ”",
    "à¦¤à§‹à¦®à¦¾à¦° à¦†à¦¸à¦² à¦ªà¦°à¦¿à¦šà§Ÿ? à¦¤à§à¦®à¦¿ à¦¹à¦²à§‡ 'à¦¨à§‡à¦Ÿà¦«à§à¦²à¦¿à¦•à§à¦¸à§‡à¦° à¦¶à§‡à¦· à¦à¦ªà¦¿à¦¸à§‹à¦¡ à¦¨à¦¾ à¦¦à§‡à¦–à¦¾ à¦ªà¦°à§à¦¯à¦¨à§à¦¤ à¦¨à¦¾ à¦˜à§à¦®à¦¾à¦¨à§‹ à¦®à¦¾à¦¨à§à¦·'! à¦†à¦° à¦à¦•à¦Ÿà¦¾ à¦¬à¦¨à§à¦§à§ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦¦à¦¾à¦°à§à¦£! ðŸ˜Ž",
    "à¦†à¦°à§‡ à¦­à¦¾à¦‡! à¦¤à§à¦®à¦¿ à¦¤à§‹ 'à¦—à§‹à¦ªà¦¨ à¦•à§à¦·à¦®à¦¤à¦¾ à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦®à¦¾à¦¨à§à¦·'! à¦¤à§‹à¦®à¦¾à¦° à¦•à§à¦·à¦®à¦¤à¦¾ à¦¹à¦²à§‹ 'à¦¸à¦¬à¦¾à¦‡à¦•à§‡ à¦¹à¦¾à¦¸à¦¾à¦¨à§‹'à¥¤ à¦šà¦¾à¦²à¦¿à¦¯à¦¼à§‡ à¦¯à¦¾à¦“! ðŸ¥³",
    "à¦¸à¦¤à§à¦¯à¦¿ à¦¬à¦²à¦¤à§‡? à¦¤à§à¦®à¦¿ à¦à¦•à¦Ÿà¦¾ 'à¦ªà¦¾à¦°à¦«à§‡à¦•à§à¦Ÿ à¦—à¦¨à§à¦¡à¦—à§‹à¦²'à¥¤ à¦¤à§à¦®à¦¿ à¦¯à§‡à¦–à¦¾à¦¨à§‡ à¦¯à¦¾à¦“, à¦¸à§‡à¦–à¦¾à¦¨à§‡ à¦®à¦œà¦¾ à¦†à¦° à¦¬à¦¿à¦¶à§ƒà¦™à§à¦–à¦²à¦¾ à¦¦à§à¦Ÿà§‹à¦‡ à¦¹à¦¯à¦¼! ðŸ¤£",
    "à¦¤à§‹à¦®à¦¾à¦° à¦®à¦¤à§‹ à¦®à¦¾à¦¨à§à¦· à¦à¦‡ à¦ªà§ƒà¦¥à¦¿à¦¬à§€à¦¤à§‡ à¦¦à§à¦°à§à¦²à¦­! à¦¤à§à¦®à¦¿ 'à¦¬à¦¿à¦¡à¦¼à¦¾à¦²à¦›à¦¾à¦¨à¦¾à¦° à¦®à¦¤à§‹ à¦•à¦¿à¦‰à¦Ÿ' à¦•à¦¿à¦¨à§à¦¤à§ 'à¦šà¦¿à¦ªà¦¸à§‡à¦° à¦ªà§à¦¯à¦¾à¦•à§‡à¦Ÿ à¦¦à§‡à¦–à¦²à§‡ à¦¬à¦¾à¦˜' à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦“à¥¤ ðŸ¯",
    "à¦¤à§à¦®à¦¿? à¦¤à§à¦®à¦¿ à¦¹à¦²à§‡ 'à¦¨à¦¿à¦œà§‡à¦° à¦¨à¦¿à¦¯à¦¼à¦®à§‡ à¦šà¦²à¦¾ à¦à¦• à¦®à§à¦•à§à¦¤ à¦†à¦¤à§à¦®à¦¾'à¥¤ à¦¤à¦¬à§‡, 'à¦¸à¦•à¦¾à¦²à§‡ à¦˜à§à¦® à¦¥à§‡à¦•à§‡ à¦“à¦ à¦¾à¦Ÿà¦¾ à¦¤à§‹à¦®à¦¾à¦° à¦¨à¦¿à¦¯à¦¼à¦®à§‡ à¦¨à§‡à¦‡'! ðŸ˜œ"
];

const nameInput = document.getElementById('nameInput');
const submitBtn = document.getElementById('submitBtn');
const responseBox = document.getElementById('responseBox');

// à¦‰à¦¤à§à¦¤à¦°à§‡à¦° à¦«à¦¾à¦‚à¦¶à¦¨
function generateResponse() {
    const fullText = nameInput.value.trim();
    if (fullText === "") {
        responseBox.innerHTML = "à¦†à¦—à§‡ à¦¤à§‹à¦®à¦¾à¦° à¦¨à¦¾à¦® à¦²à¦¿à¦–à§‡ à¦ªà§à¦°à¦¶à§à¦¨ à¦•à¦°à§‹ à¦¤à§‹!";
        responseBox.classList.add('show');
        return;
    }

    // à¦‡à¦¨à¦ªà§à¦Ÿ à¦¥à§‡à¦•à§‡ à¦¨à¦¾à¦® à¦¬à§‡à¦° à¦•à¦°à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ (à¦–à§à¦¬ à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦‰à¦ªà¦¾à¦¯à¦¼à§‡)
    let userName = "à¦¬à¦¨à§à¦§à§";
    const nameMatch = fullText.match(/(à¦†à¦®à¦¾à¦° à¦¨à¦¾à¦®|à¦†à¦®à¦¿ à¦¹à¦²à¦¾à¦®|à¦†à¦®à¦¿)( à¦°à¦•à¦¿| à¦œà¦¨| à¦†à¦¬à¦¿à¦°| à¦¤à¦¨à§| à¦®à¦¿à¦¤à§| [^\s,]+)/i);

    if (nameMatch && nameMatch[2]) {
        // à¦ªà§à¦°à¦¥à¦® à¦…à¦•à§à¦·à¦° à¦¬à¦¡à¦¼ à¦¹à¦¾à¦¤à§‡à¦° à¦•à¦°à§‡ à¦¦à§‡à¦‡
        userName = nameMatch[2].trim().replace(/^( |à¦°à¦•à¦¿| à¦œà¦¨| à¦†à¦¬à¦¿à¦°| à¦¤à¦¨à§| à¦®à¦¿à¦¤à§)/i, (match) => {
            // à¦¯à¦¦à¦¿ " à¦°à¦•à¦¿" à¦¬à¦¾ " à¦œà¦¨" à¦¦à¦¿à¦¯à¦¼à§‡ à¦¶à§à¦°à§ à¦¹à¦¯à¦¼, à¦¤à¦¬à§‡ à¦ªà§à¦°à¦¥à¦® à¦…à¦•à§à¦·à¦°à¦Ÿà¦¿ à¦¬à¦¡à¦¼ à¦¹à¦¾à¦¤à§‡à¦° à¦•à¦°à¦¬à§‡
            return match.charAt(1).toUpperCase() + match.slice(2);
        });

        // à¦¯à¦¦à¦¿ "à¦†à¦®à¦¾à¦° à¦¨à¦¾à¦®" à¦¬à¦¾ "à¦†à¦®à¦¿ à¦¹à¦²à¦¾à¦®" à¦¦à¦¿à§Ÿà§‡ à¦¶à§à¦°à§ à¦¹à§Ÿ, à¦¤à¦¾à¦¹à¦²à§‡ à¦¨à¦¾à¦®à¦Ÿà¦¿à¦•à§‡ à¦¸à§à¦¨à§à¦¦à¦°à¦­à¦¾à¦¬à§‡ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¬
        userName = userName.charAt(0).toUpperCase() + userName.slice(1);
    } else {
         // à¦¯à¦¦à¦¿ à¦¨à¦¾à¦® à¦–à§à¦à¦œà§‡ à¦¨à¦¾ à¦ªà¦¾à¦¯à¦¼, à¦¤à¦¬à§‡ à¦‡à¦¨à¦ªà§à¦Ÿà§‡à¦° à¦ªà§à¦°à¦¥à¦® à¦¶à¦¬à§à¦¦à¦Ÿà¦¿ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¬à§‡
         const firstWord = fullText.split(/[\s,]/)[0];
         userName = firstWord.charAt(0).toUpperCase() + firstWord.slice(1);
    }
    
    // à¦°à§à¦¯à¦¾à¦¨à§à¦¡à¦® à¦‰à¦¤à§à¦¤à¦° à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨
    const randomIndex = Math.floor(Math.random() * funnyResponses.length);
    let randomResponse = funnyResponses[randomIndex];
    
    // à¦‰à¦¤à§à¦¤à¦°à§‡à¦° à¦¶à§à¦°à§à¦¤à§‡ 'userName' à¦¯à§‹à¦— à¦•à¦°à§‡ à¦à¦•à¦Ÿà¦¿ à¦®à¦œà¦¾à¦° à¦°à§‚à¦ª à¦¦à§‡à¦“à§Ÿà¦¾
    const finalResponse = `${userName}? ${randomResponse}`;

    // à¦°à§‡à¦¸à¦ªà¦¨à§à¦¸ à¦¬à¦•à§à¦¸à§‡ à¦¦à§‡à¦–à¦¾à¦¨à§‹
    responseBox.classList.remove('show'); // à¦…à§à¦¯à¦¾à¦¨à¦¿à¦®à§‡à¦¶à¦¨ à¦Ÿà§à¦°à¦¿à¦•: à¦†à¦‰à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯
    setTimeout(() => {
        responseBox.innerHTML = finalResponse;
        responseBox.classList.add('show'); // à¦‡à¦¨ à¦à¦° à¦œà¦¨à§à¦¯
    }, 100); 
}

// à¦‡à¦­à§‡à¦¨à§à¦Ÿ à¦²à¦¿à¦¸à§‡à¦¨à¦¾à¦° à¦¸à§‡à¦Ÿ à¦•à¦°à¦¾
submitBtn.addEventListener('click', generateResponse);
nameInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        generateResponse();
    }
});


// ----------------------------------------------------------------
// à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦²à¦¸ à¦à¦«à§‡à¦•à§à¦Ÿà§‡à¦° à¦œà¦¨à§à¦¯ à¦­à§à¦¯à¦¾à¦¨à¦¿à¦²à¦¾ à¦œà¦¾à¦­à¦¾à¦¸à§à¦•à§à¦°à¦¿à¦ªà§à¦Ÿ à¦•à§‹à¦¡
// ----------------------------------------------------------------

const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
let particlesArray;

// à¦•à§à¦¯à¦¾à¦¨à¦­à¦¾à¦¸à§‡à¦° à¦†à¦•à¦¾à¦° à¦¸à§‡à¦Ÿ à¦•à¦°à¦¾
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas(); // à¦ªà§à¦°à¦¥à¦®à§‡ à¦•à¦² à¦•à¦°à¦¾

// à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦² à¦•à¦¨à¦¸à§à¦Ÿà§à¦°à¦¾à¦•à§à¦Ÿà¦°
class Particle {
    constructor(x, y, directionX, directionY, size, color) {
        this.x = x;
        this.y = y;
        this.directionX = directionX;
        this.directionY = directionY;
        this.size = size;
        this.color = color;
    }

    // à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦² à¦†à¦à¦•à¦¾
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
        ctx.fillStyle = this.color;
        ctx.fill();
    }

    // à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦² à¦†à¦ªà¦¡à§‡à¦Ÿ à¦•à¦°à¦¾
    update() {
        // à¦¬à¦¾à¦‰à¦¨à§à¦¡à¦¾à¦°à¦¿ à¦šà§‡à¦•
        if (this.x > canvas.width || this.x < 0) {
            this.directionX = -this.directionX;
        }
        if (this.y > canvas.height || this.y < 0) {
            this.directionY = -this.directionY;
        }

        // à¦®à§à¦­à¦®à§‡à¦¨à§à¦Ÿ
        this.x += this.directionX;
        this.y += this.directionY;
        
        // à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦² à¦†à¦à¦•à¦¾
        this.draw();
    }
}

// à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦²à¦¸ à¦‡à¦¨à¦¿à¦¶à¦¿à§Ÿà¦¾à¦²à¦¾à¦‡à¦œ à¦•à¦°à¦¾
function initParticles() {
    particlesArray = [];
    const numberOfParticles = (canvas.width * canvas.height) / 15000;
    
    for (let i = 0; i < numberOfParticles; i++) {
        const size = (Math.random() * 5) + 1;
        const x = (Math.random() * ((canvas.width - size * 2) - (size * 2)) + size * 2);
        const y = (Math.random() * ((canvas.height - size * 2) - (size * 2)) + size * 2);
        const directionX = (Math.random() * 0.4) - 0.2; // -0.2 to +0.2
        const directionY = (Math.random() * 0.4) - 0.2;
        // à¦°à¦™à§‡à¦° à¦…à¦ªà¦¶à¦¨: à¦¹à¦¾à¦²à¦•à¦¾ à¦¨à§€à¦², à¦¹à¦²à§à¦¦, à¦¬à¦¾ à¦—à§‹à¦²à¦¾à¦ªà¦¿
        const colors = ['#a4a4b5', '#ffe66d', '#ff416c']; 
        const color = colors[Math.floor(Math.random() * colors.length)];

        particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
    }
}

// à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦²à¦¸ à¦•à¦¾à¦¨à§‡à¦•à§à¦Ÿ à¦•à¦°à¦¾
function connectParticles() {
    let opacityValue = 1;
    for (let a = 0; a < particlesArray.length; a++) {
        for (let b = a; b < particlesArray.length; b++) {
            const distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + 
                             ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
            
            // à¦à¦•à¦Ÿà¦¿ à¦¨à¦¿à¦°à§à¦¦à¦¿à¦·à§à¦Ÿ à¦¦à§‚à¦°à¦¤à§à¦¬à§‡à¦° à¦®à¦§à§à¦¯à§‡ à¦¥à¦¾à¦•à¦²à§‡ à¦°à§‡à¦–à¦¾ à¦†à¦à¦•à¦¾
            if (distance < (canvas.width/7) * (canvas.height/7)) {
                opacityValue = 1 - (distance / 20000);
                ctx.strokeStyle = `rgba(255, 65, 108, ${opacityValue})`; // à¦•à¦¾à¦¨à§‡à¦•à¦¶à¦¨ à¦²à¦¾à¦‡à¦¨ à¦—à§‹à¦²à¦¾à¦ªà¦¿
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                ctx.stroke();
            }
        }
    }
}


// à¦…à§à¦¯à¦¾à¦¨à¦¿à¦®à§‡à¦¶à¦¨ à¦²à§à¦ª
function animate() {
    requestAnimationFrame(animate);
    ctx.clearRect(0, 0, canvas.width, canvas.height); // à¦ªà§à¦°à¦¤à¦¿ à¦«à§à¦°à§‡à¦®à§‡ à¦•à§à¦¯à¦¾à¦¨à¦­à¦¾à¦¸ à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à¦¾

    for (let i = 0; i < particlesArray.length; i++) {
        particlesArray[i].update();
    }
    connectParticles();
}

// à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦²à¦¸ à¦¶à§à¦°à§ à¦•à¦°à¦¾
initParticles();
animate();

// à¦¸à§à¦•à§à¦°à¦¿à¦¨à§‡à¦° à¦†à¦•à¦¾à¦° à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦¹à¦²à§‡ à¦ªà¦¾à¦°à§à¦Ÿà¦¿à¦•à§à¦¯à¦¾à¦²à¦¸ à¦°à¦¿à¦¶à§‡à¦ª à¦•à¦°à¦¾
window.addEventListener('resize', () => {
    resizeCanvas();
    initParticles(); 
});
